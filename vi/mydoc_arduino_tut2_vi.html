<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content="huong_dan,  ">
<title>Tự làm một thiết bị phát iBeacon với VBLUno51 | VBLUno51 board</title>
<link rel="stylesheet" href="css/syntax.css">


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<link rel="stylesheet" href="css/lavish-bootstrap.css">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/theme-orange.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/vbluno2_small.png">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="https://vngiotlab.github.io/vblunofeed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });
            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });
            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });
        });
    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">

        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            
                        
            <img src="images/pic_topnav.png" alt="Bo mạch VBLUno51">
            <a class="fa fa-home fa-lg navbar-brand" href="index_vi.html">&nbsp;<span class="projectTitle"> VBLUno51 - VNG Bluetooth Low Energy UNO nRF51822 - Mạch phát triển ứng dụng cho IoT</span>                        
            
            </a>
        </div>

        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i></a></li>
                <!-- entries without drop-downs appear here -->
                                                        
                                
                    
                    
                    <li><a href="news">Tin mới</a></li>
                    
                    
                                        
                               
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                    
                    
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tài nguyên liên kết<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
                            
                            <li><a href="https://goo.gl/bISeQl" target="_blank">VBLUno trên Facebook</a></li>
                            
                            
                            
                            <li><a href="https://goo.gl/w8gQHT" target="_blank">Cửa hàng bán VBLUno</a></li>
                            
                            
                            
                            <li><a href="https://goo.gl/kpLmQs" target="_blank">Mô đun DAPLink (CMSIS-DAP)</a></li>
                            
                            
                            
                            <li><a href="https://goo.gl/1nj0LZ" target="_blank">VBLUno trên diễn đàn Arduino.vn</a></li>
                            
                            
                        </ul>
                    </li>
                    
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">SDK & OS hỗ trợ<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
                            
                            <li><a href="mydoc_getstart_arduino_vi.html">Arduino IDE</a></li>
                            
                            
                            
                            <li><a href="mydoc_getstart_mbed_vi.html">ARM mbed-OS</a></li>
                            
                            
                            
                            <li><a href="mydoc_getstart_mynewt_vi.html">Apache Mynewt-OS</a></li>
                            
                            
                            
                            <li><a href="mydoc_getstart_zephyr_vi.html">Zephyr</a></li>
                            
                            
                            
                            <li><a href="mydoc_getstart_riot_vi.html">RIOT-OS</a></li>
                            
                            
                            
                            <li><a href="mydoc_getstart_nordicsdk_vi.html">Nordic SDK</a></li>
                            
                            
                        </ul>
                    </li>
                    
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Ý kiến<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
                            
                            <li><a href="https://github.com/VNGIoTLab/vbluno/issues" target="_blank">Gửi yêu cầu trên Github</a></li>
                            
                            
                            
                            <li><a href="https://www.facebook.com/bleviet/messages" target="_blank">Gửi tin nhắn trực tiếp trên Facebook</a></li>
                            
                            
                        </ul>
                    </li>
                    
                    
                    <li><a class="link-vi" href="/vbluno/index.html">ENGLISH</a></li>
                    <!-- for test in local -->
                    <!-- <li><a class="link-vi" href="/index.html">ENGLISH</a></li> -->

                
                

                <!--comment out this block if you want to hide search-->
                <li>
                
                    <!--start search-->
                    <div id="search-demo-container">                    
                        <input type="text" id="search-input" placeholder="tìm kiếm...">
                        <ul id="results-container"></ul>
                    </div>

                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search_vi.json',
                                searchResultTemplate: '<li><a href="{url}" title="Tự làm một thiết bị phát iBeacon với VBLUno51">{title}</a></li>',
                    noResultsText: 'Không có kết quả nào được tìm thấy.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                

                </li>                
            </ul>    

        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
    <div class="col-lg-12">&nbsp;</div>
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
    <li class="sidebarTitle">Bo mạch VBLUno51 </li>
    
    
            
        
    
    <li>
        <a href="#">Tổng quan</a>
        <ul>
            

            

            
            
            
            <li><a href="mydoc_introduction_vi.html">Giới thiệu VBLUno51</a></li>
            
            
            

            


            
            
            
            
            <li><a href="mydoc_over_hardware_vi.html">Chú ý các phiên bản phần cứng (quan trọng)</a></li>
            
            
            

            


            
            
            
            
            <li><a href="mydoc_over_sdk_vi.html">Software Development Kit</a></li>
            
            
            

            


            
            
            
            
            <li><a href="mydoc_over_appcanmake_vi.html">Bạn có thể tạo được các ứng dụng gì với VBLUno51?</a></li>
            
            
            

            


            
            
        </ul>
    </li>
                
        
    
    <li>
        <a href="#">Tài liệu</a>
        <ul>
            

            

            
            
            
            <li><a href="https://goo.gl/HUdV1Q" target="_blank">Đặc tả Nordic nRF51822</a></li>
            
            
            

            


            
            
            
            
            <li><a href="mydoc_doc_hardware_vi.html">Sơ đồ nguyên lý & PCB</a></li>
            
            
            

            


            
            
            
            
            <li><a href="mydoc_doc_pinout_vi.html">Pinout</a></li>
            
            
            

            


            
            
            
            
            <li><a href="mydoc_doc_fritzing_vi.html">Fritzing Part</a></li>
            
            
            

            


            
            
            
            
            <li><a href="mydoc_doc_daplink_vi.html">Nâng cấp firmware cho DAPLink</a></li>
            
            
            

            


            
            
            
            
            <li><a href="https://goo.gl/oVdvcv" target="_blank">mbed Serial driver (Chỉ với Windows)</a></li>
            
            
            

            


            
            
        </ul>
    </li>
                
        
    
    <li>
        <a href="#">==Các module BLE==</a>
        <ul>
            

            

            
            
            
            <li><a href="mydoc_module_ble51_vi.html">Module VNG BLE nRF51822</a></li>
            
            
            

            


            
            
            
            
            <li><a href="mydoc_module_ble52_vi.html">Module VNG BLE nRF52832</a></li>
            
            
            

            


            
            
        </ul>
    </li>
                
        
    
    <li>
        <a href="#">Bắt đầu thôi!</a>
        <ul>
            

            

            
            
            
            <li><a href="mydoc_getstart_arduino_vi.html">Sử dụng Arduino IDE</a></li>
            
            
            
            
            <li class="subfolders">
                <a href="#">Sử dụng mbed-OS</a>
                <ul>
                    
                    
                    
                    <li><a href="mydoc_getstart_mbedonline_vi.html">mbed Online Compiler</a></li>
                    
                    
                    
                    
                    
                    <li><a href="mydoc_getstart_gnuarm_eclipse_vi.html">GNU ARM Embedded & Eclipse IDE (khuyên dùng)</a></li>
                    
                    
                    
                    
                    
                    <li><a href="mydoc_getstart_keil_vi.html">Keil uVision</a></li>
                    
                    
                    
                </ul>
            </li>
            
            

            


            
            
            
            
            <li><a href="mydoc_getstart_zephyr_vi.html">Sử dụng Zephyr-OS</a></li>
            
            
            

            


            
            
        </ul>
    </li>
                
        
    
    <li>
        <a href="#">Công nghệ Bluetooth Low Energy (BLE)</a>
        <ul>
            

            

            
            
            
            <li><a href="mydoc_ble_vi.html">Giới thiệu công nghệ Bluetooth Low Energy</a></li>
            
            
            

            


            
            
            
            
            <li><a href="https://goo.gl/5q7jC4" target="_blank">Hướng dẫn BLE với mbed-OS</a></li>
            
            
            

            


            
            
        </ul>
    </li>
                
        
    
    <li>
        <a href="#">Loạt bài hướng dẫn</a>
        <ul>
            
            
            <li class="subfolders">
                <a href="#">Adruino</a>
                <ul>
                    
                    
                    
                    <li><a href="mydoc_arduino_tut1_vi.html">Tut1 - Thiết bị đo nhịp tim (HRM) với VBLUno51</a></li>
                    
                    
                    
                    
                    
                    <li class="active"><a href="mydoc_arduino_tut2_vi.html">Tut2 - Thiết bị Beacons với VBLUno</a></li>
                    
                    
                    
                    
                    
                    <li><a href="mydoc_arduino_tut3_vi.html">Tut3 - Đo nhiệt độ bên trong chip nRF51822</a></li>
                    
                    
                    
                    
                    
                    <li><a href="mydoc_arduino_tut4_vi.html">Tut4 - Nhiệt kế y tế (HTM) với VBLUno</a></li>
                    
                    
                    
                    
                    
                    <li><a href="mydoc_arduino_tut5_vi.html">Tut5 - Truyền thông giữa Smartphone và máy tính với “UART over BLE”</a></li>
                    
                    
                    
                    
                    
                    <li><a href="mydoc_arduino_tut6_vi.html">Tut6 - Điều khiển/Giám sát một thiết bị bất kỳ bằng Smartphone thông qua BLE</a></li>
                    
                    
                    
                    
                    
                    <li><a href="mydoc_arduino_tut7_vi.html">Tut7 - Sử dụng màn hình I2C OLED</a></li>
                    
                    
                    
                    
                    
                    <li><a href="mydoc_arduino_tut8_vi.html">Tut8 - Sử dụng màn hình GLCD trên máy GPhone</a></li>
                    
                    
                    
                    
                    
                    <li><a href="mydoc_arduino_tut9_vi.html">Tut9 - Đo nhiệt độ từ cảm biến DS18B20</a></li>
                    
                    
                    
                </ul>
            </li>
            
            

            
            
            <li class="subfolders">
                <a href="#">mbed-OS</a>
                <ul>
                    
                    
                    
                    <li><a href="mydoc_mbed_tut1_vi.html">Tut1 - Lập trình/Gỡ lỗi cho VBLUno bằng pyOCD, OpenOCD trên GNU ARM Embedded + Eclipse</a></li>
                    
                    
                    
                    
                    
                    <li><a href="mydoc_mbed_tut2_vi.html">Tut2 - BLE Beacons</a></li>
                    
                    
                    
                </ul>
            </li>
            
            

            
        </ul>
    </li>
                
        
    
    <li>
        <a href="#">Mã nguồn ví dụ</a>
        <ul>
            

            

            
            
            
            <li><a href="mydoc_code_arduino_vi.html">Arduino</a></li>
            
            
            

            


            
            
            
            
            <li><a href="mydoc_code_mbed_vi.html">mbed-OS</a></li>
            
            
            

            


            
            
            
            
            <li><a href="mydoc_code_zephyr_vi.html">Zephyr-OS</a></li>
            
            
            

            


            
            
            
            
            <li><a href="mydoc_code_android_vi.html">Ứng dụng Android-OS</a></li>
            
            
            

            


            
            
        </ul>
    </li>
                
        
    
    <li>
        <a href="#">Video</a>
        <ul>
            

            

            
            
            
            <li><a href="https://goo.gl/Vi0mpo" target="_blank">Ví dụ BLE Serial</a></li>
            
            
            

            


            
            
            
            
            <li><a href="https://goo.gl/01X4oM" target="_blank">Robot điều khiển từ xa qua BLE với VBLUno</a></li>
            
            
            

            


            
            
        </ul>
    </li>
                
        
    
    <li>
        <a href="#">Ứng dụng mobile cho BLE</a>
        <ul>
            

            

            
            
            
            <li><a href="https://goo.gl/i6DNtP" target="_blank">iBeacon & Eddystone Scanner (Android)</a></li>
            
            
            
            
            <li class="subfolders">
                <a href="#">Nordic nRF Toolbox</a>
                <ul>
                    
                    
                    
                    <li><a href="https://goo.gl/s3fbVW" target="_blank">Android</a></li>
                    
                    
                    
                    
                    
                    <li><a href="https://goo.gl/GH8gom" target="_blank">iOS</a></li>
                    
                    
                    
                </ul>
            </li>
            
            

            


            
            
            
            
            <li><a href="https://goo.gl/sFbubD" target="_blank">nRF UART 2.0 (Android)</a></li>
            
            
            
            
            <li class="subfolders">
                <a href="#">Mã nguồn (mở)</a>
                <ul>
                    
                    
                    
                    <li><a href="https://goo.gl/Et1atP" target="_blank">Nordic nRFToolbox (Android)</a></li>
                    
                    
                    
                    
                    
                    <li><a href="https://goo.gl/rdTll8" target="_blank">BluetoohLeGatt Example (Android)</a></li>
                    
                    
                    
                </ul>
            </li>
            
            

            


            
            
        </ul>
    </li>
                
        
    
    <li>
        <a href="#">Liên kết</a>
        <ul>
            

            

            
            
            
            <li><a href="http://iotviet.com.vn" target="_blank">Cửa hàng IoTViet</a></li>
            
            
            

            


            
            
            
            
            <li><a href="https://zalopay.vn" target="_blank">VNG ZaloPay – (Ứng dụng thanh toán tự động, có dùng BLE)</a></li>
            
            
            

            


            
            
            
            
            <li><a href="https://goo.gl/YCxUeK" target="_blank">VNG CSM Router (Chuyên dụng cho Phòng máy)</a></li>
            
            
            

            


            
            
            
            
            <li><a href="https://www.facebook.com/groups/iotalliancevn/" target="_blank">Vietnam IoT Alliance page</a></li>
            
            
            

            


            
            
            
            
            <li><a href="https://developer.mbed.org/" target="_blank">ARM mbed  OS developer site</a></li>
            
            
            

            


            
            
            
            
            <li><a href="https://iotmaker.vn" target="_blank">Cửa hàng IoTMakerVN</a></li>
            
            
            

            


            
            
        </ul>
    </li>
                
        
    
    <li>
        <a href="#">Liên hệ</a>
        <ul>
            

            

            
            
            
            <li><a href="https://goo.gl/c3sbnk" target="_blank">Cửa hàng</a></li>
            
            
            

            


            
            
            
            
            <li><a href="https://www.facebook.com/bleviet/" target="_blank">Bluetooth Low Energy – BLE Vietnam page</a></li>
            
            
            

            


            
            
        </ul>
    </li>
                
        
        
        <!-- if you aren't using the accordion, uncomment this block:
           <p class="external">
               <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
           </p>
           -->    
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            <div class="post-header">
   <h1 class="post-title-main">Tự làm một thiết bị phát iBeacon với VBLUno51</h1>
</div>



<div class="post-content">

   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->



	<script>
	$( document ).ready(function() {
	  // Handler for .ready() called.

	$('#toc_vi').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

	/* this offset helps account for the space taken up by the floating toolbar. */
	$('#toc_vi').on('click', 'a', function() {
	  var target = $(this.getAttribute('href'))
	    , scroll_target = target.offset().top

	  $(window).scrollTop(scroll_target - 10);
	  return false
	})
	  
	});
	</script>

	<div id="toc_vi"></div>



    


    

  <h2 id="những-nét-cơ-bản-về-công-nghệ-beacons">Những nét cơ bản về công nghệ Beacons</h2>

<ul>
  <li>
    <p>Về công nghệ Beacons nhiều bạn đã được nghe đến hoặc trực tiếp sử dụng nó. Vậy beacons là gì và lợi ích của nó ra sao. Sau đây mình sẽ giới thiệu những nét chính về công nghệ Beacons.</p>
  </li>
  <li>
    <p>Beacon là thiết bị điện tử nhỏ phát ra tín hiệu Bluetooth năng lượng thấp (Bluetooth Low Energy - BLE). Bất kỳ thiết bị nào có công nghệ BLE đều có thể thu được tín hiệu này, chẳng hạn như điện thoại thông minh hay máy tính bảng.</p>
  </li>
  <li>
    <p>Một thiết bị Beacon hoạt động như một “broadcasting device” - thiết bị chỉ quảng bá tín hiệu ra không gian. Điều này đồng nghĩa với việc các thiết bị BLE Central sẽ không thể kết nối đến thiết bị beacons. Thiết bị này hỗ trợ các thiết bị BLE khác nhau có thể đọc được thông tin từ Beacon tại cùng một thời điểm. Có thể xem thiết bị beacon như một ngọn hải đăng, một đèn báo hiệu để các thiết bị khác có thể dễ dàng nhận được một số thông tin cần truyền tải.</p>
  </li>
</ul>

<p><img src="images/arduino/tut/tut2/1.png" alt="" /></p>

<ul>
  <li>
    <p>Đây là giao thức một chiều từ Beacon đến các thiết bị BLE mà không cần tạo một kết nối giữa hai thiết bị. Giống như công nghệ GPS, dựa vào cường độ tín hiệu BLE mà các thiết bị có thể xác định khoảng cách giữa Beacon và các thiết bị BLE xung quanh. </p>
  </li>
  <li>
    <p>Beacon giải quyết các bài toán như: định vị trong tòa nhà, trung tâm thương mại - xác thực thanh toán (contactless payment) - lấy mã khuyến mại (checkin coupons) - quảng cáo thông minh (proximity marketing).</p>
  </li>
  <li>
    <p>Đối với giáo dục, một số công ty đã áp dụng Beacon để phân tích hành vi sinh viên, hỗ trợ kết nối sinh viên và giáo viên từ đó chống được tỷ lệ drop-out.</p>
  </li>
  <li>
    <p>Cấu trúc một gói tin Advertising của giao tiếp BLE được trình bày tại hình dưới:</p>
  </li>
</ul>

<p><img src="images/arduino/tut/tut2/2.png" alt="" /></p>

<ul>
  <li>
    <p>Phân loại các chuẩn Beacons:</p>

    <ul>
      <li>
        <p>iBeacons của Apple</p>
      </li>
      <li>
        <p>Eddystone của Google</p>
      </li>
      <li>
        <p>AltBeacon của Radius Networks</p>
      </li>
      <li>
        <p>v..v…</p>
      </li>
    </ul>
  </li>
  <li>
    <p>Phần tiếp theo trình bày cấu trúc phần user data và ý nghĩa các tham số quan trọng của chuẩn iBeacons và Eddystone. Các bạn có thể tìm hiểu các chuẩn beacons khác thông qua Internet.</p>
  </li>
</ul>

<hr />
<h2 id="ibeacons">iBeacons</h2>

<ul>
  <li>Hình dưới trình bày cấu trúc các byte dữ liệu trong thông tin mà iBeacons phát quảng bá ra môi trường. Một điểm chú ý là iBeacons chỉ sử dụng 30 / 31 byte dữ liệu của trường PDU Data trong gói tin BLE advertising.</li>
</ul>

<p><img src="images/arduino/tut/tut2/3.png" alt="" /></p>

<ul>
  <li>
    <p>Với iBeacons, Apple đã chuẩn hóa định dạng các gói tin quảng bá BLE. Theo định dạng này, với một packet quảng bá bạn cần quan tâm 4 thông tin chính sau:</p>

    <ul>
      <li>
        <p><strong>UUID</strong>: Unique ID với độ dài 16 bytes (128 bit) được dùng để phân biệt giữa các nhóm sản phẩm với nhau. Ví dụ, nếu Coca-Cola có một mạng các beacons trong một chuỗi các cửa hàng thì các thiết bị beacons đi kèm sản phẩm của Coca-Cola nên có chung một giá trị UUID này.</p>
      </li>
      <li>
        <p><strong>Major</strong>: Có độ dài 2 byte được dùng để phân biệt một nhóm beacons nhỏ so với một nhóm lớn. Ví dụ, nếu Coca-Cola có bốn beacons trong một cửa hàng tạp hóa, cả bốn beacons này nên có cùng một Major. Điều này cho phép Coca-Cola biết chính xác cửa hàng mà khách đang ở trong đó.</p>
      </li>
      <li>
        <p><strong>Minor</strong>: Có độ dài 2 byte để định danh các beacons riêng biệt trong từng nhóm nhỏ. Trong ví dụ với Coca-Cola ở trên, có một beacons đặt ở phía trước cửa hàng mang một giá trị Minor độc nhất. Điều này cho phép ứng dụng đi kèm biết chính xác nơi mà khách hàng đang đứng</p>
      </li>
      <li>
        <p><strong>Tx Power</strong>: Được dùng để xác định khoảng cách đến beacon. Tx power được định nghĩa như độ mạnh của tín hiệu tại vị trí cách thiết bị beacons 1 mét. Các ứng dụng đi kèm có thể dùng điều này như một thông tin cơ bản để ước lượng khoảng cách từ sản phẩm (có beacons đi kèm) đến smartphone chạy ứng dụng.</p>
      </li>
    </ul>
  </li>
  <li>
    <p>Đọc thêm về iBeacon</p>
  </li>
</ul>

<p><a href="https://developer.mbed.org/teams/Bluetooth-Low-Energy/code/BLE_iBeacon/">mbed BLE_iBeacon</a></p>

<p><a href="https://developer.apple.com/ibeacon/">https://developer.apple.com/ibeacon/</a></p>

<h2 id="eddystone">Eddystone</h2>

<ul>
  <li>Cấu trúc trường PDU data trong chuẩn Eddystone được trình bày ở hình dưới</li>
</ul>

<p><img src="images/arduino/tut/tut2/3_2.png" alt="" /></p>

<p>Thông tin chi tiết về Eddystone các bạn có thể đọc tại <a href="https://github.com/google/eddystone/blob/master/protocol-specification.md">ĐÂY</a></p>

<hr />
<h2 id="thực-hành-phát-ibeacons-với-bo-mạch-vbluno51">Thực hành phát iBeacons với bo mạch VBLUno51</h2>

<ul>
  <li>Các bạn có thể tham khảo mã nguồn ví dụ phát iBeacons cho bo mạch VBLUno51 có sẵn trong Arduino IDE:</li>
</ul>

<p><code class="highlighter-rouge">File --&gt; Examples --&gt; BLE_Examples --&gt; BLE_beacon</code></p>

<p><strong>Một số ghi chú:</strong></p>

<ul>
  <li><em>Đoạn code sau chứa nội dung gói dữ liệu quảng bá beacons</em></li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>const static uint8_t beaconPayload[] = {
0x4C,0x00,                                                         // Company Identifier Code = Apple
0x02,                                                                  // Type = iBeacon
0x15,                                                                  // Following data length
0x71,0x3d,0x00,0x00,0x50,0x3e,0x4c,0x75,0xba,0x94,0x31,0x48,0xf1,0x8d,0x94,0x1e, // Beacon UUID
0x00,0x49,                                                                       // Major
0x00,0x0A,                                                                       // Minor
0xC5                                                                             // Measure Power
};
</code></pre>
</div>

<ul>
  <li>
    <p><em>Các tham số quảng bá quan trọng:</em></p>

    <ul>
      <li>
        <p>LE_GENERAL_DISCOVERABLE: Cho phép discovery</p>
      </li>
      <li>
        <p>MANUFACTURER_SPECIFIC_DATA</p>
      </li>
      <li>
        <p>ADV_NON_CONNECTABLE_UNDIRECTED: Không hỗ trợ kết nối</p>
      </li>
    </ul>
  </li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>ble.accumulateAdvertisingPayload(GapAdvertisingData::BREDR_NOT_SUPPORTED | GapAdvertisingData::LE_GENERAL_DISCOVERABLE);  

ble.accumulateAdvertisingPayload(GapAdvertisingData::MANUFACTURER_SPECIFIC_DATA, beaconPayload, sizeof(beaconPayload));

ble.setAdvertisingType(GapAdvertisingParams::ADV_NON_CONNECTABLE_UNDIRECTED);
</code></pre>
</div>

<p><strong>Kết quả demo:</strong></p>

<ul>
  <li>Sau khi biên dịch và nạp firmware cho VBLUno51, sử dụng một số phần mềm có tính năng đọc tín hiệu beacons trên smartphone để kiểm tra hoạt động của thiết bị beacons . Ở đây mình dùng phần mềm Beacon Scanner trên Android OS.</li>
</ul>

<p><img src="images/arduino/tut/tut2/4.png" alt="" /></p>

<p><img src="images/arduino/tut/tut2/5.png" alt="" /></p>

<p><strong>Video</strong>:</p>

<p><a href="https://www.youtube.com/watch?v=vYMvAAsFJ2A&amp;t=5s">Video demo</a></p>

<ul>
  <li>Có thể thấy, bằng việc sử dụng VBLUno51 (và cả VBLUno52), bạn dễ dàng chế tạo thử nghiệm một thiết bị beacons áp dụng cho nhiều bài toán khác nhau.</li>
</ul>

<hr />
<h2 id="viết-phần-mềm-chạy-trên-android-os-để-thu-tín-hiệu-ibeacons">Viết phần mềm chạy trên Android OS để thu tín hiệu iBeacons</h2>

<p>Xem hướng dẫn tại <a href="https://www.youtube.com/watch?v=5Bi9Vjby280&amp;t=27s">video</a></p>


    <div class="tags">
        
        <b>Tags: </b>
        
        
        
        <a href="tag_huong_dan.html" class="btn btn-default navbar-btn cursorNorm" role="button">huong_dan</a>
        
        
        
    </div>

    

</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2017 VNG Corporation. All rights reserved. <br />
 Site last generated: Aug 11, 2017 <br />
<p><img src="images/company_logo_medium.png" alt="Company logo"/></p>
                </div>
            </div>
</footer>


        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
    </div>

</body>

</html>